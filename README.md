## Flutter MindMate

A modern, modular, and sustainable Flutter application. The project uses powerful code generation, strict code standards, scalable modular structure, and secure configurations. MindMate also serves as a personal “mentor”: it can be used like a daily journal, helps users find answers to their questions, gain insights, and reflect their emotions throughout the day.

> Important: Answers are generated using the OpenAI API; the mobile app includes an AI integration.

## Features
- Speech input and speech-to-text, plus text-to-speech
- AI assistant: Responses are generated via the OpenAI API (LLM-based guidance)
- Authentication: Email/password sign-in and one‑tap Google sign‑in
- Password reset: Send reset link via email
- Daily mood-related reminders/notifications
- Periodic mood tracking with charts (trends/statistics)
- Conversation history with contextual recall
- Local/remote notifications, permission handling, and tap actions
- Modular feature architecture with Provider-based state management
- Extensible service layer and dependency injection with `get_it`
- Responsive UI via `responsive_framework` and customizable AppBars

## Screens

<table style="width:100%; border-collapse: collapse;">
  <tr>
    <td><img src="https://github.com/user-attachments/assets/53895618-8e36-42cf-b6cb-d7f5cb8e750d" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/d13fface-55f8-4f85-949d-1f3ffc83db08" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/6b644f0c-25d1-4d76-9504-1525fb94b631" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/58653246-6458-4021-8950-387445d5c7a8" width="100%" /></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/ca111334-3e68-453f-b49c-bf0ce34f98b6" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/5f1bf555-d344-4405-932c-13496e266710" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/86052c67-6390-467b-9e84-617d2bbbff2a" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/101c5092-2ae4-4804-b840-ef52f062b60b" width="100%" /></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/0605b15b-cd82-46e8-9887-8a73df785d31" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/4f80f6ef-5f8c-4350-ab6d-e4d1d114cb11" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/e1e2ce55-e3f4-4a0e-8f2c-7fac592c35d4" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/6df9c97e-95f4-4916-817a-697276c2fad6" width="100%" /></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/ce6614b7-03d0-404a-9244-b4b3833adb10" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/021cc449-d8c2-49e9-9960-3f7c3bdbac40" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/3ae22b53-2aac-489e-b372-9eaca8528a8a" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/174bfa5a-897a-40ad-b9b4-c58efd4dbd50" width="100%" /></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/3d878bdb-3864-4e8c-8293-299d737ad14a" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/31330b16-3385-403c-ad33-2ec8bbb75288" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/339056fa-7d26-4512-97f8-d29a16cfa0fa" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/facdd231-b3cd-4a3c-8f2b-fde796702255" width="100%" /></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/2b616f5b-b68c-4bf2-ae88-46a62542405f" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/8fbdc782-d254-47d9-afa4-b2bf2662fb19" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/e4640f64-22ae-42cb-8ffd-eb865b2757d4" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/c92515bc-982c-4f7c-b48e-474a275ea08f" width="100%" /></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/beda2568-1962-4f9f-a83c-aa5be303c8ef" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/6d804306-f2cd-4011-bfc7-1660fdb55f1c" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/c5cca22b-beae-42d3-a580-53ab0b1a563d" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/6c6d2ebc-47de-420e-96af-46e55f59a2ea" width="100%" /></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/3e722f05-2423-443b-9ee8-1fd54ec30400" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/11b1ffae-c889-466c-9af0-4def6b297a30" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/4dd70507-d60e-49ba-acef-22daef039b0b" width="100%" /></td>
    <td><img src="https://github.com/user-attachments/assets/542ae7ad-a3d3-4aef-8f63-bb2e2731f07c" width="100%" /></td>
  </tr>
</table>


### Table of Contents
- Project Overview
- Architecture & Directory Structure
- Commands & Automation (rps)
- Code Generation & Asset Management
- Environment Variables & Security
- State Management & Layers
- UI & Design Guidelines
- Logging & Error Handling
- Lint Rules & Code Standards
- Technologies & Packages
- AI Integration (OpenAI API)
- Notification Service (NotificationService)
- Flutter Version Management (Sidekick)
- build.yaml Configuration
- Testing (UI: Maestro)
---

## Project Overview
MindMate is a Flutter app where features are modularized under `features/`, services are grouped under `products/`, dependencies are managed with `get_it`, and resources are auto-generated via `flutter_gen_runner`. Hardcoded strings and numeric constants are avoided; strings live in `enums/strings_enum.dart` and sizes in `products/enums/sizes_enum.dart` as enhanced enums. The app generates answers using the OpenAI API, providing an AI integration for mobile.

---

## Architecture & Directory Structure
Example layout:

```
lib/
  features/
    <feature_name>/
      view/
        <feature_name>_view.dart         // UI tree only
      sub_view/
        <extracted_widgets>.dart         // Extracted UI parts
      view_model/
        <feature_name>_view_model.dart   // Business logic, state, services
      provider/
        <feature_name>_provider.dart     // Provider definitions (ref usage only in VM)

  products/
    appbars/
      <custom_appbars>.dart
    enums/
      sizes_enum.dart                    // ImageSizesEnum, TextSizesEnum, IconSizesEnum, WidgetSizesEnum, AppbarSizesEnum (enhanced enums)
      strings_enum.dart                  // Centralized strings
    services/
      notification_service.dart          // Notifications & permissions

  service_locator/
    service_locator.dart                 // get_it registrations

gen/                                      // flutter_gen outputs

assets/
  images/ ...
  colors/colors.xml                       // Colors (optional)
```

Key principles:
- `view.dart` files hold UI only. Business logic, validation, services and state live in `view_model/` or `provider/`.
- Access model: Providers are accessed only via `ref` and only from ViewModel. UI focuses on presentation.
- AppBars are extracted and placed under `products/appbars/`.

---

## Commands & Automation (rps)
Frequently used commands are shortened via `rps.yaml`. Suggested scripts:

```yaml
scripts:
  gen_flutter: flutter pub run build_runner build --delete-conflicting-outputs
  gen_watch: flutter pub run build_runner watch --delete-conflicting-outputs
  pub_get: flutter pub get
  analyze: flutter analyze
  format: dart format lib test
```

Usage:
```
rps run gen_flutter
rps run gen_watch
rps run analyze
```

Required rules:
- Whenever code generation is affected: run `rps run gen_flutter`.
- When anything under `assets/` changes: run `rps run gen_flutter`.

---

## Code Generation & Asset Management
- Resources (assets, colors, fonts, images) are managed with `flutter_gen_runner`, generating code under `gen/`.
- JSON Serializable runs only for `lib/models/**_model.dart` files.
- Each package in `pubspec.yaml` should have a short comment prefix.

---

## Environment Variables & Security
- API keys and secrets live in `.env`, never hardcoded.
- Variables are managed via `envied` for type-safe access.
- Do not commit `.env` to VCS.

Usage note:
- See `.env.example` for sample keys and explanations. Copy it to `.env`, fill the values, then run `rps run gen_flutter` for codegen.

Example `.env`:
```
API_BASE_URL=https://api.example.com
SENTRY_DSN=...
FIREBASE_KEY=...
```

---

## State Management & Layers
- State management is done with Provider.
- Providers are accessed via `ref` only in the ViewModel; the UI renders data and forwards interactions.
- Throwing is allowed only in ViewModel/Service layers (to be handled above). Never throw from UI.

---

## UI & Design Guidelines
- Responsive layout via `responsive_framework` with breakpoints in `main.dart`.
- No hardcoded strings. All texts live in `products/enums/strings_enum.dart`.
- No hardcoded numeric sizes. Define all sizes as enhanced enums in `products/enums/sizes_enum.dart`:
  - `ImageSizesEnum`
  - `TextSizesEnum`
  - `IconSizesEnum`
  - `WidgetSizesEnum`
  - `AppbarSizesEnum`
- Only create enums for the requested type.

Colors:
- Optionally manage colors in `assets/colors/colors.xml` and access via `flutter_gen`.

AppBars:
- Extract AppBars and place them under `products/appbars/`.

---

## Logging & Error Handling
- Avoid `print`; use a centralized logging approach.
- Wrap critical/crash-prone code in `try-catch`.
- Only throw from ViewModel/Service layers (to be handled by upper layers); never from UI.

---

## Lint Rules & Code Standards
Enable the following in `analysis_options.yaml` (summary):
- `flutter_lints`
- `always_declare_return_types: true`
- `always_put_required_named_parameters_first: true`
- `always_require_non_null_named_parameters: true`
- `always_use_package_imports: true`
- `avoid_print: true`
- `prefer_final_locals: true`
- `avoid_empty_else: true`
- `sort_constructors_first: true`
- `use_super_parameters: true`

Coding guidelines:
- Prefer clear, meaningful names over cryptic ones.
- Keep business logic in ViewModel/Service; UI is presentation-only.
- Manage dependencies via `get_it` in `service_locator/service_locator.dart`.

Note: Team-wide development standards (“Cursor rules”) are defined in a separate guide to avoid duplication here.

---

## Technologies & Packages
- dart_openai: OpenAI API client (LLM-based response generation)
- Flutter & Dart: Cross-platform UI development
- Riverpod 3 (`riverpod`, `flutter_riverpod`): State management; `ref` access only in ViewModel
- get_it: Dependency injection (`service_locator/service_locator.dart`)
- responsive_framework: Adaptive UI for mobile/tablet/web/desktop
- flutter_gen_runner + build_runner: Codegen for assets/colors/fonts (`gen/`)
- json_serializable + json_annotation: `g.dart` generation (only for `lib/models/**_model.dart`)
- envied: Type-safe environment variable management
- flutter_dotenv: Load .env files (when needed)
- dio: HTTP client
- connectivity_plus: Network status
- permission_handler: Permissions
- image_picker: Image selection
- url_launcher: External links/app launching
- flutter_local_notifications + timezone: Local notifications & scheduling
- fl_chart: Charts and mood trends
- equatable: Value equality helpers
- kartal: Utility extensions
- Firebase: `firebase_core`, `cloud_firestore`, `firebase_auth`, `firebase_storage`, `firebase_ui_auth`, `firebase_ui_oauth_google`, `firebase_ui_localizations`, `google_sign_in`
- Flutter Sidekick: Pin Flutter version/channel (recommended)
- Maestro: UI test automation

Note: See `pubspec.yaml` for versions and comments.

---

## AI Integration (OpenAI API)
- Purpose: Provide smart, contextual, and empathetic responses to users
- Backend: Responses are generated using the OpenAI API (LLM)
- Security: API keys are stored in `.env` and accessed via `envied`; never hardcoded
- Data: Minimal data is sent; conversation history context is used with consent and privacy in mind
- Resilience: Network failures are handled gracefully with user feedback; critical code is wrapped in `try-catch`

Note: Do not share production keys; monitor usage/limits in the OpenAI dashboard.

---

## Flutter Version Management (Sidekick)
- Pin a Flutter version with Sidekick before development to align SDK across the team.
- Choose a channel (stable/beta) and a specific version if needed.

Setup: Install Sidekick, register the project, pin the version, then verify with `flutter --version`.

---

## build.yaml Configuration
Run `json_serializable` only for `lib/models/*_model.dart`. Example configuration:

```yaml
targets:
  $default:
    sources:
      include:
        - lib/**
    builders:
      json_serializable:
        generate_for:
          include:
            - lib/models/**_model.dart
```

This optimizes build time and prevents `g.dart` generation for unwanted files.

---

## Notification Service (NotificationService)
File: `lib/products/services/notification_service.dart`

Capabilities:
- Permissions flow & status checks
- Scheduling/showing local (and/or push) notifications
- Behavior when app is foreground/background

---

## Testing (UI: Maestro)
- UI tests are written with Maestro
- Scenarios can live under `maestro/`
- Refer to Maestro docs for setup and commands

---



